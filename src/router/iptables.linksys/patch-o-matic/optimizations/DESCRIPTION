Optimizations pending for kernel inclusion
