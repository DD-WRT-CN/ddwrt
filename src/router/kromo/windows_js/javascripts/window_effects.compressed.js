Effect.ResizeWindow=Class.create(),Object.extend(Object.extend(Effect.ResizeWindow.prototype,Effect.Base.prototype),{initialize:function(e,t,n,r,i){this.window=e,this.window.resizing=!0;var s=e.getSize();this.initWidth=parseFloat(s.width),this.initHeight=parseFloat(s.height);var o=e.getLocation();this.initTop=parseFloat(o.top),this.initLeft=parseFloat(o.left),this.width=r!=null?parseFloat(r):this.initWidth,this.height=i!=null?parseFloat(i):this.initHeight,this.top=t!=null?parseFloat(t):this.initTop,this.left=n!=null?parseFloat(n):this.initLeft,this.dx=this.left-this.initLeft,this.dy=this.top-this.initTop,this.dw=this.width-this.initWidth,this.dh=this.height-this.initHeight,this.r2=$(this.window.getId()+"_row2"),this.content=$(this.window.getId()+"_content"),this.contentOverflow=this.content.getStyle("overflow")||"auto",this.content.setStyle({overflow:"hidden"}),this.window.options.wiredDrag&&(this.window.currentDrag=e._createWiredElement(),this.window.currentDrag.show(),this.window.element.hide()),this.start(arguments[5])},update:function(e){var t=Math.floor(this.initWidth+this.dw*e),n=Math.floor(this.initHeight+this.dh*e),r=Math.floor(this.initTop+this.dy*e),i=Math.floor(this.initLeft+this.dx*e);window.ie&&(Math.floor(n)==0?this.r2.hide():Math.floor(n)>1&&this.r2.show()),this.r2.setStyle({height:n}),this.window.setSize(t,n),this.window.setLocation(r,i)},finish:function(e){this.window.options.wiredDrag&&(this.window._hideWiredElement(),this.window.element.show()),this.window.setSize(this.width,this.height),this.window.setLocation(this.top,this.left),this.r2.setStyle({height:null}),this.content.setStyle({overflow:this.contentOverflow}),this.window.resizing=!1}}),Effect.ModalSlideDown=function(e){var t=WindowUtilities.getWindowScroll(),n=e.getStyle("height");return e.setStyle({top:-(parseFloat(n)-t.top)+"px"}),e.show(),new Effect.Move(e,Object.extend({x:0,y:parseFloat(n)},arguments[1]||{}))},Effect.ModalSlideUp=function(e){var t=e.getStyle("height");return new Effect.Move(e,Object.extend({x:0,y:-parseFloat(t)},arguments[1]||{}))},PopupEffect=Class.create(),PopupEffect.prototype={initialize:function(e){this.html=$(e),this.options=Object.extend({className:"popup_effect",duration:.4},arguments[1]||{})},show:function(e,t){var n=Position.cumulativeOffset(this.html),r=this.html.getDimensions(),i=e.win.getBounds();this.window=e.win,this.div||(this.div=document.createElement("div"),this.div.className=this.options.className,this.div.style.height=r.height+"px",this.div.style.width=r.width+"px",this.div.style.top=n[1]+"px",this.div.style.left=n[0]+"px",this.div.style.position="absolute",document.body.appendChild(this.div)),this.options.fromOpacity&&this.div.setStyle({opacity:this.options.fromOpacity}),this.div.show();var s="top:"+i.top+";left:"+i.left+";width:"+i.width+";height:"+i.height;this.options.toOpacity&&(s+=";opacity:"+this.options.toOpacity),new Effect.Morph(this.div,{style:s,duration:this.options.duration,afterFinish:this._showWindow.bind(this)})},hide:function(e,t){var n=Position.cumulativeOffset(this.html),r=this.html.getDimensions();this.window.visible=!0;var i=this.window.getBounds();this.window.visible=!1,this.window.element.hide(),this.div.style.height=i.height,this.div.style.width=i.width,this.div.style.top=i.top,this.div.style.left=i.left,this.options.toOpacity&&this.div.setStyle({opacity:this.options.toOpacity}),this.div.show();var s="top:"+n[1]+"px;left:"+n[0]+"px;width:"+r.width+"px;height:"+r.height+"px";this.options.fromOpacity&&(s+=";opacity:"+this.options.fromOpacity),new Effect.Morph(this.div,{style:s,duration:this.options.duration,afterFinish:this._hideDiv.bind(this)})},_showWindow:function(){this.div.hide(),this.window.element.show()},_hideDiv:function(){this.div.hide()}};