String.prototype.parseColor=function(){var e="#";if(this.slice(0,4)=="rgb("){var t=this.slice(4,this.length-1).split(","),n=0;do e+=parseInt(t[n]).toColorPart();while(++n<3)}else if(this.slice(0,1)=="#"){if(this.length==4)for(var n=1;n<4;n++)e+=(this.charAt(n)+this.charAt(n)).toLowerCase();this.length==7&&(e=this.toLowerCase())}return e.length==7?e:arguments[0]||this},Element.collectTextNodes=function(e){return $A($(e).childNodes).collect(function(e){return e.nodeType==3?e.nodeValue:e.hasChildNodes()?Element.collectTextNodes(e):""}).flatten().join("")},Element.collectTextNodesIgnoreClass=function(e,t){return $A($(e).childNodes).collect(function(e){return e.nodeType==3?e.nodeValue:e.hasChildNodes()&&!Element.hasClassName(e,t)?Element.collectTextNodesIgnoreClass(e,t):""}).flatten().join("")},Element.setContentZoom=function(e,t){return e=$(e),e.setStyle({fontSize:t/100+"em"}),Prototype.Browser.WebKit&&window.scrollBy(0,0),e},Element.getInlineOpacity=function(e){return $(e).style.opacity||""},Element.forceRerendering=function(e){try{e=$(e);var t=document.createTextNode(" ");e.appendChild(t),e.removeChild(t)}catch(n){}},Array.prototype.call=function(){var e=arguments;this.each(function(t){t.apply(this,e)})};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},tagifyText:function(e){if(typeof Builder=="undefined")throw"Effect.tagifyText requires including script.aculo.us' builder.js library";var t="position:relative";Prototype.Browser.IE&&(t+=";zoom:1"),e=$(e),$A(e.childNodes).each(function(n){n.nodeType==3&&(n.nodeValue.toArray().each(function(r){e.insertBefore(Builder.node("span",{style:t},r==" "?String.fromCharCode(160):r),n)}),Element.remove(n))})},multiple:function(e,t){var n;typeof e!="object"&&typeof e!="function"||!e.length?n=$(e).childNodes:n=e;var r=Object.extend({speed:.1,delay:0},arguments[2]||{}),i=r.delay;$A(n).each(function(e,n){new t(e,Object.extend(r,{delay:n*r.speed+i}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(e,t){e=$(e),t=(t||"appear").toLowerCase();var n=Object.extend({queue:{position:"end",scope:e.id||"global",limit:1}},arguments[2]||{});Effect[e.visible()?Effect.PAIRS[t][1]:Effect.PAIRS[t][0]](e,n)}},Effect2=Effect;Effect.Transitions={linear:Prototype.K,sinoidal:function(e){return-Math.cos(e*Math.PI)/2+.5},reverse:function(e){return 1-e},flicker:function(e){var e=-Math.cos(e*Math.PI)/4+.75+Math.random()/4;return e>1?1:e},wobble:function(e){return-Math.cos(e*Math.PI*9*e)/2+.5},pulse:function(e,t){return t=t||5,Math.round(e%(1/t)*t)==0?e*t*2-Math.floor(e*t*2):1-(e*t*2-Math.floor(e*t*2))},none:function(e){return 0},full:function(e){return 1}},Effect.ScopedQueue=Class.create(),Object.extend(Object.extend(Effect.ScopedQueue.prototype,Enumerable),{initialize:function(){this.effects=[],this.interval=null},_each:function(e){this.effects._each(e)},add:function(e){var t=(new Date).getTime(),n=typeof e.options.queue=="string"?e.options.queue:e.options.queue.position;switch(n){case"front":this.effects.findAll(function(e){return e.state=="idle"}).each(function(t){t.startOn+=e.finishOn,t.finishOn+=e.finishOn});break;case"with-last":t=this.effects.pluck("startOn").max()||t;break;case"end":t=this.effects.pluck("finishOn").max()||t}e.startOn+=t,e.finishOn+=t,(!e.options.queue.limit||this.effects.length<e.options.queue.limit)&&this.effects.push(e),this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(e){this.effects=this.effects.reject(function(t){return t==e}),this.effects.length==0&&(clearInterval(this.interval),this.interval=null)},loop:function(){var e=(new Date).getTime();for(var t=0,n=this.effects.length;t<n;t++)this.effects[t]&&this.effects[t].loop(e)}}),Effect.Queues={instances:$H(),get:function(e){return typeof e!="string"?e:(this.instances[e]||(this.instances[e]=new Effect.ScopedQueue),this.instances[e])}},Effect.Queue=Effect.Queues.get("global"),Effect.DefaultOptions={transition:Effect.Transitions.sinoidal,duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},Effect.Base=function(){},Effect.Base.prototype={position:null,start:function(options){function codeForEvent(e,t){return(e[t+"Internal"]?"this.options."+t+"Internal(this);":"")+(e[t]?"this.options."+t+"(this);":"")}options.transition===!1&&(options.transition=Effect.Transitions.linear),this.options=Object.extend(Object.extend({},Effect.DefaultOptions),options||{}),this.currentFrame=0,this.state="idle",this.startOn=this.options.delay*1e3,this.finishOn=this.startOn+this.options.duration*1e3,this.fromToDelta=this.options.to-this.options.from,this.totalTime=this.finishOn-this.startOn,this.totalFrames=this.options.fps*this.options.duration,eval('this.render = function(pos){ if(this.state=="idle"){this.state="running";'+codeForEvent(options,"beforeSetup")+(this.setup?"this.setup();":"")+codeForEvent(options,"afterSetup")+'};if(this.state=="running"){pos=this.options.transition(pos)*'+this.fromToDelta+"+"+this.options.from+";this.position=pos;"+codeForEvent(options,"beforeUpdate")+(this.update?"this.update(pos);":"")+codeForEvent(options,"afterUpdate")+"}}"),this.event("beforeStart"),this.options.sync||Effect.Queues.get(typeof this.options.queue=="string"?"global":this.options.queue.scope).add(this)},loop:function(e){if(e>=this.startOn){if(e>=this.finishOn){this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),this.event("afterFinish");return}var t=(e-this.startOn)/this.totalTime,n=Math.round(t*this.totalFrames);n>this.currentFrame&&(this.render(t),this.currentFrame=n)}},cancel:function(){this.options.sync||Effect.Queues.get(typeof this.options.queue=="string"?"global":this.options.queue.scope).remove(this),this.state="finished"},event:function(e){this.options[e+"Internal"]&&this.options[e+"Internal"](this),this.options[e]&&this.options[e](this)},inspect:function(){var e=$H();for(property in this)typeof this[property]!="function"&&(e[property]=this[property]);return"#<Effect:"+e.inspect()+",options:"+$H(this.options).inspect()+">"}},Effect.Parallel=Class.create(),Object.extend(Object.extend(Effect.Parallel.prototype,Effect.Base.prototype),{initialize:function(e){this.effects=e||[],this.start(arguments[1])},update:function(e){this.effects.invoke("render",e)},finish:function(e){this.effects.each(function(t){t.render(1),t.cancel(),t.event("beforeFinish"),t.finish&&t.finish(e),t.event("afterFinish")})}}),Effect.Event=Class.create(),Object.extend(Object.extend(Effect.Event.prototype,Effect.Base.prototype),{initialize:function(){var e=Object.extend({duration:0},arguments[0]||{});this.start(e)},update:Prototype.emptyFunction}),Effect.Opacity=Class.create(),Object.extend(Object.extend(Effect.Opacity.prototype,Effect.Base.prototype),{initialize:function(e){this.element=$(e);if(!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});var t=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(t)},update:function(e){this.element.setOpacity(e)}}),Effect.Move=Class.create(),Object.extend(Object.extend(Effect.Move.prototype,Effect.Base.prototype),{initialize:function(e){this.element=$(e);if(!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(t)},setup:function(){this.element.makePositioned(),this.originalLeft=parseFloat(this.element.getStyle("left")||"0"),this.originalTop=parseFloat(this.element.getStyle("top")||"0"),this.options.mode=="absolute"&&(this.options.x=this.options.x-this.originalLeft,this.options.y=this.options.y-this.originalTop)},update:function(e){this.element.setStyle({left:Math.round(this.options.x*e+this.originalLeft)+"px",top:Math.round(this.options.y*e+this.originalTop)+"px"})}}),Effect.MoveBy=function(e,t,n){return new Effect.Move(e,Object.extend({x:n,y:t},arguments[3]||{}))},Effect.Scale=Class.create(),Object.extend(Object.extend(Effect.Scale.prototype,Effect.Base.prototype),{initialize:function(e,t){this.element=$(e);if(!this.element)throw Effect._elementDoesNotExistError;var n=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:t},arguments[2]||{});this.start(n)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1,this.elementPositioning=this.element.getStyle("position"),this.originalStyle={},["top","left","width","height","fontSize"].each(function(e){this.originalStyle[e]=this.element.style[e]}.bind(this)),this.originalTop=this.element.offsetTop,this.originalLeft=this.element.offsetLeft;var e=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(t){e.indexOf(t)>0&&(this.fontSize=parseFloat(e),this.fontSizeType=t)}.bind(this)),this.factor=(this.options.scaleTo-this.options.scaleFrom)/100,this.dims=null,this.options.scaleMode=="box"&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]),/^content/.test(this.options.scaleMode)&&(this.dims=[this.element.scrollHeight,this.element.scrollWidth]),this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(e){var t=this.options.scaleFrom/100+this.factor*e;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*t+this.fontSizeType}),this.setDimensions(this.dims[0]*t,this.dims[1]*t)},finish:function(e){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(e,t){var n={};this.options.scaleX&&(n.width=Math.round(t)+"px"),this.options.scaleY&&(n.height=Math.round(e)+"px");if(this.options.scaleFromCenter){var r=(e-this.dims[0])/2,i=(t-this.dims[1])/2;this.elementPositioning=="absolute"?(this.options.scaleY&&(n.top=this.originalTop-r+"px"),this.options.scaleX&&(n.left=this.originalLeft-i+"px")):(this.options.scaleY&&(n.top=-r+"px"),this.options.scaleX&&(n.left=-i+"px"))}this.element.setStyle(n)}}),Effect.Highlight=Class.create(),Object.extend(Object.extend(Effect.Highlight.prototype,Effect.Base.prototype),{initialize:function(e){this.element=$(e);if(!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(t)},setup:function(){if(this.element.getStyle("display")=="none"){this.cancel();return}this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(e){return parseInt(this.options.startcolor.slice(e*2+1,e*2+3),16)}.bind(this)),this._delta=$R(0,2).map(function(e){return parseInt(this.options.endcolor.slice(e*2+1,e*2+3),16)-this._base[e]}.bind(this))},update:function(e){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(t,n,r){return t+Math.round(this._base[r]+this._delta[r]*e).toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}}),Effect.ScrollTo=Class.create(),Object.extend(Object.extend(Effect.ScrollTo.prototype,Effect.Base.prototype),{initialize:function(e){this.element=$(e),this.start(arguments[1]||{})},setup:function(){Position.prepare();var e=Position.cumulativeOffset(this.element);this.options.offset&&(e[1]+=this.options.offset);var t=window.innerHeight?window.height-window.innerHeight:document.body.scrollHeight-(document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight);this.scrollStart=Position.deltaY,this.delta=(e[1]>t?t:e[1])-this.scrollStart},update:function(e){Position.prepare(),window.scrollTo(Position.deltaX,this.scrollStart+e*this.delta)}}),Effect.Fade=function(e){e=$(e);var t=e.getInlineOpacity(),n=Object.extend({from:e.getOpacity()||1,to:0,afterFinishInternal:function(e){if(e.options.to!=0)return;e.element.hide().setStyle({opacity:t})}},arguments[1]||{});return new Effect.Opacity(e,n)},Effect.Appear=function(e){e=$(e);var t=Object.extend({from:e.getStyle("display")=="none"?0:e.getOpacity()||0,to:1,afterFinishInternal:function(e){e.element.forceRerendering()},beforeSetup:function(e){e.element.setOpacity(e.options.from).show()}},arguments[1]||{});return new Effect.Opacity(e,t)},Effect.Puff=function(e){e=$(e);var t={opacity:e.getInlineOpacity(),position:e.getStyle("position"),top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};return new Effect.Parallel([new Effect.Scale(e,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(e){Position.absolutize(e.effects[0].element)},afterFinishInternal:function(e){e.effects[0].element.hide().setStyle(t)}},arguments[1]||{}))},Effect.BlindUp=function(e){return e=$(e),e.makeClipping(),new Effect.Scale(e,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(e){e.element.hide().undoClipping()}},arguments[1]||{}))},Effect.BlindDown=function(e){e=$(e);var t=e.getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:t.height,originalWidth:t.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.element.undoClipping()}},arguments[1]||{}))},Effect.SwitchOff=function(e){e=$(e);var t=e.getInlineOpacity();return new Effect.Appear(e,Object.extend({duration:.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(e){new Effect.Scale(e.element,1,{duration:.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(e){e.element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned().setStyle({opacity:t})}})}},arguments[1]||{}))},Effect.DropOut=function(e){e=$(e);var t={top:e.getStyle("top"),left:e.getStyle("left"),opacity:e.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(e,{x:0,y:100,sync:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:.5,beforeSetup:function(e){e.effects[0].element.makePositioned()},afterFinishInternal:function(e){e.effects[0].element.hide().undoPositioned().setStyle(t)}},arguments[1]||{}))},Effect.Shake=function(e){e=$(e);var t={top:e.getStyle("top"),left:e.getStyle("left")};return new Effect.Move(e,{x:20,y:0,duration:.05,afterFinishInternal:function(e){new Effect.Move(e.element,{x:-40,y:0,duration:.1,afterFinishInternal:function(e){new Effect.Move(e.element,{x:40,y:0,duration:.1,afterFinishInternal:function(e){new Effect.Move(e.element,{x:-40,y:0,duration:.1,afterFinishInternal:function(e){new Effect.Move(e.element,{x:40,y:0,duration:.1,afterFinishInternal:function(e){new Effect.Move(e.element,{x:-20,y:0,duration:.05,afterFinishInternal:function(e){e.element.undoPositioned().setStyle(t)}})}})}})}})}})}})},Effect.SlideDown=function(e){e=$(e).cleanWhitespace();var t=e.down().getStyle("bottom"),n=e.getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:n.height,originalWidth:n.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:t})}},arguments[1]||{}))},Effect.SlideUp=function(e){e=$(e).cleanWhitespace();var t=e.down().getStyle("bottom");return new Effect.Scale(e,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleMode:"box",scaleFrom:100,restoreAfterFinish:!0,beforeStartInternal:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned().setStyle({bottom:t}),e.element.down().undoPositioned()}},arguments[1]||{}))},Effect.Squish=function(e){return new Effect.Scale(e,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(e){e.element.makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping()}})},Effect.Grow=function(e){e=$(e);var t=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{}),n={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},r=e.getDimensions(),i,s,o,u;switch(t.direction){case"top-left":i=s=o=u=0;break;case"top-right":i=r.width,s=u=0,o=-r.width;break;case"bottom-left":i=o=0,s=r.height,u=-r.height;break;case"bottom-right":i=r.width,s=r.height,o=-r.width,u=-r.height;break;case"center":i=r.width/2,s=r.height/2,o=-r.width/2,u=-r.height/2}return new Effect.Move(e,{x:i,y:s,duration:.01,beforeSetup:function(e){e.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(e){new Effect.Parallel([new Effect.Opacity(e.element,{sync:!0,to:1,from:0,transition:t.opacityTransition}),new Effect.Move(e.element,{x:o,y:u,sync:!0,transition:t.moveTransition}),new Effect.Scale(e.element,100,{scaleMode:{originalHeight:r.height,originalWidth:r.width},sync:!0,scaleFrom:window.opera?1:0,transition:t.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(e){e.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.effects[0].element.undoClipping().undoPositioned().setStyle(n)}},t))}})},Effect.Shrink=function(e){e=$(e);var t=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{}),n={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},r=e.getDimensions(),i,s;switch(t.direction){case"top-left":i=s=0;break;case"top-right":i=r.width,s=0;break;case"bottom-left":i=0,s=r.height;break;case"bottom-right":i=r.width,s=r.height;break;case"center":i=r.width/2,s=r.height/2}return new Effect.Parallel([new Effect.Opacity(e,{sync:!0,to:0,from:1,transition:t.opacityTransition}),new Effect.Scale(e,window.opera?1:0,{sync:!0,transition:t.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(e,{x:i,y:s,sync:!0,transition:t.moveTransition})],Object.extend({beforeStartInternal:function(e){e.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.effects[0].element.hide().undoClipping().undoPositioned().setStyle(n)}},t))},Effect.Pulsate=function(e){e=$(e);var t=arguments[1]||{},n=e.getInlineOpacity(),r=t.transition||Effect.Transitions.sinoidal,i=function(e){return r(1-Effect.Transitions.pulse(e,t.pulses))};return i.bind(r),new Effect.Opacity(e,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(e){e.element.setStyle({opacity:n})}},t),{transition:i}))},Effect.Fold=function(e){e=$(e);var t={top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};return e.makeClipping(),new Effect.Scale(e,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(n){new Effect.Scale(e,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(e){e.element.hide().undoClipping().setStyle(t)}})}},arguments[1]||{}))},Effect.Morph=Class.create(),Object.extend(Object.extend(Effect.Morph.prototype,Effect.Base.prototype),{initialize:function(e){this.element=$(e);if(!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({style:{}},arguments[1]||{});if(typeof t.style=="string")if(t.style.indexOf(":")==-1){var n="",r="."+t.style;$A(document.styleSheets).reverse().each(function(e){e.cssRules?cssRules=e.cssRules:e.rules&&(cssRules=e.rules),$A(cssRules).reverse().each(function(e){if(r==e.selectorText)throw n=e.style.cssText,$break});if(n)throw $break}),this.style=n.parseStyle(),t.afterFinishInternal=function(e){e.element.addClassName(e.options.style),e.transforms.each(function(t){t.style!="opacity"&&(e.element.style[t.style]="")})}}else this.style=t.style.parseStyle();else this.style=$H(t.style);this.start(t)},setup:function(){function e(e){if(!e||["rgba(0, 0, 0, 0)","transparent"].include(e))e="#ffffff";return e=e.parseColor(),$R(0,2).map(function(t){return parseInt(e.slice(t*2+1,t*2+3),16)})}this.transforms=this.style.map(function(t){var n=t[0],r=t[1],i=null;if(r.parseColor("#zzzzzz")!="#zzzzzz")r=r.parseColor(),i="color";else if(n=="opacity")r=parseFloat(r),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});else if(Element.CSS_LENGTH.test(r)){var s=r.match(/^([\+\-]?[0-9\.]+)(.*)$/);r=parseFloat(s[1]),i=s.length==3?s[2]:null}var o=this.element.getStyle(n);return{style:n.camelize(),originalValue:i=="color"?e(o):parseFloat(o||0),targetValue:i=="color"?e(r):r,unit:i}}.bind(this)).reject(function(e){return e.originalValue==e.targetValue||e.unit!="color"&&(isNaN(e.originalValue)||isNaN(e.targetValue))})},update:function(e){var t={},n,r=this.transforms.length;while(r--)t[(n=this.transforms[r]).style]=n.unit=="color"?"#"+Math.round(n.originalValue[0]+(n.targetValue[0]-n.originalValue[0])*e).toColorPart()+Math.round(n.originalValue[1]+(n.targetValue[1]-n.originalValue[1])*e).toColorPart()+Math.round(n.originalValue[2]+(n.targetValue[2]-n.originalValue[2])*e).toColorPart():n.originalValue+Math.round((n.targetValue-n.originalValue)*e*1e3)/1e3+n.unit;this.element.setStyle(t,!0)}}),Effect.Transform=Class.create(),Object.extend(Effect.Transform.prototype,{initialize:function(e){this.tracks=[],this.options=arguments[1]||{},this.addTracks(e)},addTracks:function(e){return e.each(function(e){var t=$H(e).values().first();this.tracks.push($H({ids:$H(e).keys().first(),effect:Effect.Morph,options:{style:t}}))}.bind(this)),this},play:function(){return new Effect.Parallel(this.tracks.map(function(e){var t=[$(e.ids)||$$(e.ids)].flatten();return t.map(function(t){return new e.effect(t,Object.extend({sync:!0},e.options))})}).flatten(),this.options)}}),Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex"),Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/,String.prototype.parseStyle=function(){var e=document.createElement("div");e.innerHTML='<div style="'+this+'"></div>';var t=e.childNodes[0].style,n=$H();return Element.CSS_PROPERTIES.each(function(e){t[e]&&(n[e]=t[e])}),Prototype.Browser.IE&&this.indexOf("opacity")>-1&&(n.opacity=this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]),n},Element.morph=function(e,t){return new Effect.Morph(e,Object.extend({style:t},arguments[2]||{})),e},["getInlineOpacity","forceRerendering","setContentZoom","collectTextNodes","collectTextNodesIgnoreClass","morph"].each(function(e){Element.Methods[e]=Element[e]}),Element.Methods.visualEffect=function(e,t,n){return s=t.dasherize().camelize(),effect_class=s.charAt(0).toUpperCase()+s.substring(1),new Effect[effect_class](e,n),$(e)},Element.addMethods();